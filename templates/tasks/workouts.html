{% extends "base.html" %}
{% load static %}
{% block title %}Workout Plan{% endblock %}
{% block extra_head %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
{% endblock %}
{% block content %}
<div class="workouts-shell">
  <header class="workouts-header">
    <div class="workouts-header__title">
      <h1>Your Workout Plan</h1>
      <p>AI-generated weekly sequence based on your goals</p>
    </div>
  </header>

  <section class="workouts-week">
    <div class="workouts-week__header">
      <h2>
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2v3m10-3v3M4 8h16M5 5h14a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
      This Week
    </h2>
      <a class="health-button-secondary" href="#">Generate New Plan</a>
    </div>
    <div class="workouts-week__days">
      {% for day in week_days %}
        <button type="button" class="workouts-week__day{% if forloop.first %} is-active{% endif %}">
          <span class="workouts-week__label">{{ day }}</span>
          <span class="workouts-week__date">{{ forloop.counter }}</span>
        </button>
      {% endfor %}
    </div>
  </section>

  <section class="workouts-list">
    {% for workout in workouts_plan %}
      <article class="workout-card">
        <header class="workout-card__header">
          <div>
            <h3>{{ workout.name }}</h3>
            <div class="workout-card__meta">
              <span class="workout-tag workout-tag--{{ workout.type }}">{{ workout.type }}</span>
              <span class="workout-tag workout-tag--{{ workout.difficulty }}">{{ workout.difficulty }}</span>
              <span class="workout-duration">{{ workout.duration }} min</span>
            </div>
          </div>
          {% if workout.completed %}
            <span class="workout-status workout-status--done">
              <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M5 12 10 17 19 7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
              Completed
            </span>
          {% else %}
            <a class="workout-start" href="#"><span>▶</span>Start Workout</a>
          {% endif %}
        </header>

        <div class="workout-exercises">
          <h4>Exercises</h4>
          <ul>
            {% for exercise in workout.exercises %}
              <li>
                <span>{{ exercise.name }}</span>
                <span class="workout-exercises__detail">
                  {% if exercise.sets and exercise.reps %}
                    {{ exercise.sets }} × {{ exercise.reps }}
                  {% else %}
                    {{ exercise.duration }}s
                  {% endif %}
                </span>
              </li>
            {% endfor %}
          </ul>
        </div>
      </article>
    {% endfor %}
  </section>
</div>
{% endblock %}
{% block extra_js %}
  {{ block.super }}
  <script src="{% static 'js/workouts.js' %}"></script>
{% endblock %}
